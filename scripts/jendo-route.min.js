/*!
 * Jendo Route v1.1.1
 * https://nobidem.github.io/jendo/
 *
 * Copyright Nobidem
 * Released under the MIT license
 * https://nobidem.github.io/jendo/license
 */
function JendoRoute(){this.data=null,this.routes=[]}JendoRoute.prototype.init=function(){var e=[];if(0==jendo.pageLinkType&&jendo.isFileProtocol()||2==jendo.pageLinkType){if(window.location.search.length>0&&(e=window.location.search.split("&")[0].replace("?","").split("/")),jendo.isNullOrWhiteSpace(jendo.rootUrl)){var o=window.location.pathname.lastIndexOf("/");jendo.rootUrl=window.location.protocol+"//"+window.location.pathname.substring(0,o+1)}}else{var t=window.location.pathname.trim();jendo.startsWith(t,jendo.rootUrl)&&(t=t.substring(jendo.rootUrl.length,t.length)),t.length>0&&(e="/"==t[0]?t.substr(1,t.length-1).split("/"):t.split("/"))}for(var n=null,r=0;r<this.routes.length&&null==n;r++)n=this.createRouteData(e,this.routes[r]);this.data=null==n?{controller:"home",action:"index",id:null}:n},JendoRoute.prototype.mapRoute=function(e){this.routes.push(e)},JendoRoute.prototype.createRouteData=function(e,o){for(var t=jendo.isNull(o.defaults)?{}:o.defaults,n=o.url.split("/"),r=0;r<n.length;r++){var i=n[r].trim();if(i.length>0)if("{"==i[0]&&"}"==i[i.length-1]){var l=i.substr(1,i.length-2);if(r<e.length){var a=e[r];jendo.isNullOrWhiteSpace(a)||(t[l]=a)}}else if(i!=e[r])return null}return t},JendoRoute.prototype.getViewUrl=function(e,o){if(jendo.isNullOrWhiteSpace(e)){var t="/views/"+this.data.controller+"/"+this.data.action+".html",n=jendo.isNullOrWhiteSpace(this.data.area)?"":"/аreas/"+this.data.area;return jendo.rootUrl+n+t}var t=jendo.startsWith(e,"/")?"/views"+jendo.trimRight(e,"/")+".html":"/views/"+jendo.trimRight(e,"/")+".html",n=jendo.isNullOrWhiteSpace(o)?"":"/аreas/"+o;return jendo.rootUrl+n+t},JendoRoute.prototype.renderPage=function(e,o,t){var n=jendo(e);n.html(""),n.load(this.getViewUrl(o),function(){if(jendo.isNull(t)||t(),void 0!==jendo.readyFunctions)for(void 0===jendo.readyFunctionIndex&&(jendo.readyFunctionIndex=0);jendo.readyFunctionIndex<jendo.readyFunctions.length;){var e=jendo.readyFunctions[jendo.readyFunctionIndex];jendo.readyFunctionIndex+=1,e()}})},JendoRoute.prototype.pageLink=function(e){return 0==jendo.pageLinkType&&jendo.isFileProtocol()||2==jendo.pageLinkType?jendo.isNullOrWhiteSpace(e)||"/"!=e[0]?e:"?"+e.substring(1,e.length).replace(/\?/g,"&"):jendo.combineUrl(jendo.rootUrl,e)},jendo.route=new JendoRoute,jendo.renderPage=function(e,o,t){jendo.route.renderPage(e,o,t)};