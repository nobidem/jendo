/*!
 * Jendo Route v1.1.1
 * https://nobidem.github.io/jendo/
 *
 * Copyright Nobidem
 * Released under the MIT license
 * https://nobidem.github.io/jendo/license
 */
function JendoRoute(){this.data=null,this.routes=[]}JendoRoute.prototype.init=function(){var e=[];if(jendo.isFileProtocol()){if(window.location.search.length>0&&(e=window.location.search.split("&")[0].replace("?","").split("/")),jendo.isNullOrWhiteSpace(jendo.rootUrl)){var t=window.location.pathname.lastIndexOf("/");jendo.rootUrl=window.location.protocol+"//"+window.location.pathname.substring(0,t+1)}}else{var o=window.location.pathname.trim();o.length>0&&(e="/"==o[0]?o.substr(1,o.length-1).split("/"):o.split("/"))}for(var n=null,i=0;i<this.routes.length&&null==n;i++)n=this.createRouteData(e,this.routes[i]);this.data=null==n?{controller:"home",action:"index",id:null}:n},JendoRoute.prototype.mapRoute=function(e){this.routes.push(e)},JendoRoute.prototype.createRouteData=function(e,t){for(var o=jendo.isNull(t.defaults)?{}:t.defaults,n=t.url.split("/"),i=0;i<n.length;i++){var r=n[i].trim();if(r.length>0)if("{"==r[0]&&"}"==r[r.length-1]){var a=r.substr(1,r.length-2);if(i<e.length){var d=e[i];jendo.isNullOrWhiteSpace(d)||(o[a]=d)}}else if(r!=e[i])return null}return o},JendoRoute.prototype.getViewUrl=function(e,t){if(jendo.isNullOrWhiteSpace(e)){o="/views/"+this.data.controller+"/"+this.data.action+".html";return(n=jendo.isNullOrWhiteSpace(this.data.area)?"":"/аreas/"+this.data.area)+o}var o=jendo.startsWith(e,"/")?"/views"+jendo.trimRight(e,"/")+".html":"/views/"+jendo.trimRight(e,"/")+".html",n=jendo.isNullOrWhiteSpace(t)?"":"/аreas/"+t;return n+o},JendoRoute.prototype.renderBody=function(e,t){jendo(e).load(this.getViewUrl(t),function(){if(void 0!==jendo.readyFunctions)for(void 0===jendo.readyFunctionIndex&&(jendo.readyFunctionIndex=0);jendo.readyFunctionIndex<jendo.readyFunctions.length;){var e=jendo.readyFunctions[jendo.readyFunctionIndex];jendo.readyFunctionIndex+=1,e()}})},JendoRoute.prototype.pageLink=function(e){return jendo.isFileProtocol()?jendo.isNullOrWhiteSpace(e)||"/"!=e[0]?e:"?"+e.substring(1,e.length).replace(/\?/g,"&"):e},jendo.route=new JendoRoute,jendo.renderBody=function(e,t){jendo.route.renderBody(e,t)};